(this["webpackJsonparound-app"]=this["webpackJsonparound-app"]||[]).push([[0],{10:function(e,a,t){e.exports=t(16)},15:function(e,a,t){},16:function(e,a,t){"use strict";t.r(a);var n=t(0),r=t.n(n),o=t(6),c=t.n(o),i=(t(15),t(4)),l=t(1),s=t(7),u=t.n(s);var m=function(){return r.a.createElement("header",{className:"header"},r.a.createElement("img",{className:"header__logo",src:u.a,alt:"Around the U.S. Logo"}))},p=r.a.createContext();var d=function(e){var a=r.a.useContext(p),t=a&&e.card.owner._id===a._id,n="place__delete-btn ".concat(!t&&"place__delete-btn_hidden"),o=a&&e.card.likes.some((function(e){return e._id===a._id})),c="place__like-btn ".concat(o&&"place__like-btn_clicked");return r.a.createElement("li",{key:e.card._id,className:"place"},r.a.createElement("div",{className:"place__image",style:{backgroundImage:"url(".concat(e.card.link,")")},onClick:function(){e.onCardClick(e.card)}}),r.a.createElement("button",{className:n,"aria-label":"delete-card",onClick:function(){e.onCardDelete(e.card)}}),r.a.createElement("div",{className:"place__footer"},r.a.createElement("h2",{className:"place__name"},e.card.name),r.a.createElement("div",{className:"place__like-container"},r.a.createElement("button",{className:c,"aria-label":"like-or-unlike-card",onClick:function(){e.onCardLike(e.card)}}),r.a.createElement("p",{className:"place__like-counter"}))))};var f=function(e){return r.a.createElement(r.a.Fragment,null,r.a.createElement("div",{className:"popup__overlay"+(e.isOpen?" popup__overlay_visible":"")}),r.a.createElement("div",{className:"popup__container popup__container_type_".concat(e.name)+(e.isOpen?" popup__container_visible":"")},r.a.createElement("button",{className:"button button_action_close",type:"reset","aria-label":"close-".concat(e.name,"-modal"),onClick:e.onClose}),r.a.createElement("h2",{className:"popup__title"},e.title),r.a.createElement("form",{id:"".concat(e.name,"-form"),name:"".concat(e.name,"Form"),className:"popup__form",action:"#",noValidate:!0,onSubmit:e.onSubmit},e.children)))};var _=function(e){return r.a.createElement(r.a.Fragment,null,r.a.createElement("div",{className:"popup__overlay"+(e.card?" popup__overlay_visible":"")}),r.a.createElement("figure",{className:"popup__image-container popup__container_type_image"+(e.card?" popup__image-container_visible":"")},r.a.createElement("button",{className:"button button_action_close",type:"reset","aria-label":"close-image-popup",onClick:e.onClose}),r.a.createElement("img",{src:e.card?e.card.link:"",alt:e.card?e.card.title:"",className:"popup__image"}),r.a.createElement("figcaption",{className:"popup__image-caption"},e.card?e.card.title:"")))};var b=function(e){var a=r.a.useContext(p);return r.a.createElement("main",null,r.a.createElement("section",{className:"profile"},r.a.createElement("div",null,r.a.createElement("img",{src:a&&a.avatar,alt:"Avatar",className:"profile__image",onClick:e.onEditAvatar}),r.a.createElement("button",{className:"button button_action_change-avatar","aria-label":"open-change-avatar-modal"})),r.a.createElement("div",{className:"profile__info"},r.a.createElement("div",{className:"profile__text"},r.a.createElement("h2",{className:"profile__name"},a&&a.name),r.a.createElement("p",{className:"profile__job"},a&&a.about)),r.a.createElement("button",{className:"button button_action_edit","aria-label":"open-edit-profile-modal",onClick:e.onEditProfile})),r.a.createElement("button",{className:"button button_action_add","aria-label":"open-new-card-modal",onClick:e.onAddPlace})),r.a.createElement("div",{className:"places"},r.a.createElement("ul",{className:"places__grid"},e.cards.map((function(a){return r.a.createElement(d,{key:a._id,card:a,onCardClick:e.onCardClick,onCardLike:e.onCardLike,onCardDelete:e.onCardDelete})})))),r.a.createElement(f,{name:"delete",title:"Are you sure?",isOpen:!1,onClose:e.onCloseButtons},r.a.createElement("button",{className:"button button_action_submit",type:"submit",value:"Save","aria-label":"confirm-delete-card"},"Yes")),r.a.createElement(_,{onClose:e.onCloseButtons,card:e.selectedCard}))};var h=function(){return r.a.createElement("footer",{className:"footer"},r.a.createElement("p",{className:"footer__copyright"},"\xa9 2020 Around The U.S."))},v=t(8),E=t(9),C=new(function(){function e(a){Object(v.a)(this,e),this.baseUrl=a.baseUrl,this.headers=a.headers}return Object(E.a)(e,[{key:"getCardList",value:function(){return fetch(this.baseUrl+"/cards",{headers:this.headers}).then((function(e){if(e.ok)return e.json()}))}},{key:"getUserInfo",value:function(){return fetch(this.baseUrl+"/users/me",{headers:this.headers}).then((function(e){if(e.ok)return e.json()}))}},{key:"setAvatar",value:function(e){return fetch(this.baseUrl+"/users/me/avatar",{method:"PATCH",headers:this.headers,body:JSON.stringify({avatar:e})}).then((function(e){if(e.ok)return e.json()}))}},{key:"setUserInfo",value:function(e){var a=e.name,t=e.about;return fetch(this.baseUrl+"/users/me",{method:"PATCH",headers:this.headers,body:JSON.stringify({name:a,about:t})}).then((function(e){if(e.ok)return e.json()}))}},{key:"addNewCard",value:function(e){var a=e.title,t=e.link;return fetch(this.baseUrl+"/cards",{method:"POST",headers:this.headers,body:JSON.stringify({name:a,link:t})}).then((function(e){if(e.ok)return e.json()}))}},{key:"deleteCard",value:function(e){return fetch(this.baseUrl+"/cards/".concat(e),{method:"DELETE",headers:this.headers})}},{key:"updateLikes",value:function(e,a){var t=a?"DELETE":"PUT";return fetch(this.baseUrl+"/cards/likes/".concat(e),{method:t,headers:this.headers}).then((function(e){if(e.ok)return e.json()}))}}]),e}())({baseUrl:"https://around.nomoreparties.co/v1/group-2",headers:{authorization:"dc340326-95ec-4474-9060-e6102316f742","Content-Type":"application/json"}});var g=function(e){var a=r.a.useContext(p),t=r.a.useState(""),n=Object(l.a)(t,2),o=n[0],c=n[1],i=r.a.useState(""),s=Object(l.a)(i,2),u=s[0],m=s[1];return r.a.useEffect((function(){c(a&&a.name),m(a&&a.about)}),[a]),r.a.createElement(f,{name:"edit",title:"Edit profile",isOpen:e.isOpen,onClose:e.onClose,onSubmit:function(a){a.preventDefault(),e.onUpdateUser({name:o,about:u})}},r.a.createElement("input",{className:"popup__input",type:"text",id:"name",name:"name",placeholder:"Name",minLength:"2",maxLength:"40",required:!0,value:o||"",onChange:function(e){c(e.target.value)}}),r.a.createElement("span",{className:"popup__input-error",id:"name-input-error"}),r.a.createElement("input",{className:"popup__input",type:"text",id:"job",name:"job",placeholder:"About me",minLength:"2",maxLength:"200",required:!0,value:u||"",onChange:function(e){m(e.target.value)}}),r.a.createElement("span",{className:"popup__input-error",id:"job-input-error"}),r.a.createElement("button",{className:"button button_action_submit button_inactive",type:"submit",value:"Save","aria-label":"submit-edit-profile"},"Save"))};var k=function(e){var a=r.a.useRef("");return r.a.createElement(f,{name:"avatar",title:"Change profile picture",isOpen:e.isOpen,onClose:e.onClose,onSubmit:function(t){t.preventDefault(),e.onUpdateAvatar({avatar:a})}},r.a.createElement("input",{className:"popup__input",type:"url",id:"avatar",name:"avatar",placeholder:"Enter link to image",minLength:"2",required:!0,ref:a}),r.a.createElement("span",{className:"popup__input-error",id:"avatar-input-error"}),r.a.createElement("button",{className:"button button_action_submit button_inactive",type:"submit",value:"Save","aria-label":"submit-change-avatar"},"Save"))};var N=function(e){var a=r.a.useState(""),t=Object(l.a)(a,2),n=t[0],o=t[1],c=r.a.useState(""),i=Object(l.a)(c,2),s=i[0],u=i[1];return r.a.createElement(f,{name:"add",title:"New place",isOpen:e.isOpen,onClose:e.onClose,onSubmit:function(a){a.preventDefault(),e.onAddNewCard({title:n,link:s})}},r.a.createElement("input",{className:"popup__input",type:"text",id:"title",name:"title",placeholder:"Title",minLength:"1",maxLength:"30",required:!0,onChange:function(e){o(e.target.value)}}),r.a.createElement("span",{className:"popup__input-error",id:"title-input-error"}),r.a.createElement("input",{className:"popup__input",type:"url",id:"link",name:"link",placeholder:"Image link",required:!0,onChange:function(e){u(e.target.value)}}),r.a.createElement("span",{className:"popup__input-error",id:"imageUrl-input-error"}),r.a.createElement("button",{className:"button button_action_submit button_inactive",type:"submit",value:"Create","aria-label":"submit-new-card-modal"},"Create"))};var y=function(e){var a=r.a.useState(!1),t=Object(l.a)(a,2),n=t[0],o=t[1],c=r.a.useState(!1),s=Object(l.a)(c,2),u=s[0],d=s[1],f=r.a.useState(!1),_=Object(l.a)(f,2),v=_[0],E=_[1],y=r.a.useState([]),O=Object(l.a)(y,2),S=O[0],j=O[1],U=r.a.useState(null),A=Object(l.a)(U,2),L=A[0],w=A[1],x=r.a.useState(null),P=Object(l.a)(x,2),D=P[0],T=P[1];function I(){E(!1),o(!1),d(!1),w(null)}return r.a.useEffect((function(){j(S)}),[S]),r.a.useEffect((function(){C.getUserInfo().then((function(e){T(e)})).catch((function(e){console.log(e)}))}),[]),r.a.useEffect((function(){C.getCardList().then((function(e){j((function(a){return[].concat(Object(i.a)(a),Object(i.a)(e))}))})).catch((function(e){console.log(e)}))}),[]),r.a.createElement(r.a.Fragment,null,r.a.createElement(p.Provider,{value:D},r.a.createElement(m,null),r.a.createElement(k,{isOpen:n,onClose:I,onUpdateAvatar:function(e){var a=e.avatar;C.setAvatar(a.current.value).then((function(e){T(e)})),I()}}),r.a.createElement(g,{isOpen:u,onClose:I,onUpdateUser:function(e){var a=e.name,t=e.about;C.setUserInfo({name:a,about:t}).then((function(e){T(e)})),I()}}),r.a.createElement(N,{isOpen:v,onClose:I,onAddNewCard:function(e){var a=e.title,t=e.link;C.addNewCard({title:a,link:t}).then((function(e){j([].concat(Object(i.a)(S),[e]))})),I()}}),r.a.createElement(b,{onCloseButtons:I,onEditProfile:function(){d(!0)},onAddPlace:function(){E(!0)},onEditAvatar:function(){o(!0)},onCardClick:function(e){w(e)},onCardLike:function(e){var a=e.likes.some((function(e){return e._id===D._id}));C.updateLikes(e._id,a).then((function(a){var t=S.map((function(t){return t._id===e._id?a:t}));j(t)}))},onCardDelete:function(e){C.deleteCard(e._id).then((function(){j(S.filter((function(a){return a._id!==e._id})))})).catch((function(e){console.log(e)}))},isAddPlacePopupOpen:v,isEditAvatarPopupOpen:n,cards:S,selectedCard:L}),r.a.createElement(h,null)))};Boolean("localhost"===window.location.hostname||"[::1]"===window.location.hostname||window.location.hostname.match(/^127(?:\.(?:25[0-5]|2[0-4][0-9]|[01]?[0-9][0-9]?)){3}$/));c.a.render(r.a.createElement(r.a.StrictMode,null,r.a.createElement(y,null)),document.getElementById("root")),"serviceWorker"in navigator&&navigator.serviceWorker.ready.then((function(e){e.unregister()})).catch((function(e){console.error(e.message)}))},7:function(e,a,t){e.exports=t.p+"static/media/header-logo.71ad3aff.svg"}},[[10,1,2]]]);
//# sourceMappingURL=main.24f58162.chunk.js.map